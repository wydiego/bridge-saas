# ğŸŒ‰ BRIDGE SaaS - Lewis Configuration

## ğŸ” Credenciales de Lewis

### Base de Datos PostgreSQL
- **Database**: `bridge_lewis_db`
- **Usuario**: `lewis_bridge`  
- **ContraseÃ±a**: `Lewis2024Secure!`

### Usuario Administrador
- **Usuario**: `lewis`
- **Email**: `lewis@bridge.bo`
- **ContraseÃ±a**: `LewisAdmin2024!`

### Redis Cache
- **URL**: redis://localhost:6379/0
- **ContraseÃ±a**: `Lewis_Redis_2024!`

## ğŸš€ Inicio RÃ¡pido

### Setup inicial (solo primera vez)
```bash
cd ~/Documents/n8n/Bridge
./scripts/setup.sh
```

### Desarrollo diario
```bash
cd ~/Documents/n8n/Bridge
./scripts/dev.sh
```

### Manual (paso a paso)
```bash
# 1. Servicios Docker
docker-compose up -d postgres redis

# 2. Backend
cd backend
source venv/bin/activate
python manage.py migrate
python manage.py create_lewis_admin
python manage.py runserver
```

## ğŸŒ URLs Importantes
- **Backend API**: http://localhost:8000
- **Admin Django**: http://localhost:8000/admin
- **API Docs**: http://localhost:8000/api/docs/

## ğŸ“‹ Estructura del Proyecto
```
~/Documents/n8n/Bridge/
â”œâ”€â”€ backend/              # Django + DRF
â”‚   â”œâ”€â”€ bridge_core/      # ConfiguraciÃ³n principal
â”‚   â”œâ”€â”€ apps/            # Aplicaciones Django
â”‚   â”‚   â”œâ”€â”€ authentication/
â”‚   â”‚   â”œâ”€â”€ clients/
â”‚   â”‚   â”œâ”€â”€ documents/
â”‚   â”‚   â”œâ”€â”€ customs/
â”‚   â”‚   â”œâ”€â”€ reports/
â”‚   â”‚   â”œâ”€â”€ audit/
â”‚   â”‚   â””â”€â”€ dashboard/
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/            # React + Next.js (prÃ³ximamente)
â”œâ”€â”€ docker/             # Configuraciones Docker
â”œâ”€â”€ scripts/            # Scripts de automatizaciÃ³n
â”œâ”€â”€ .env               # Variables de entorno
â””â”€â”€ docker-compose.yml
```

## ğŸ”§ Comandos Ãštiles

### Django Management
```bash
cd backend && source venv/bin/activate

# Crear migraciones
python manage.py makemigrations

# Aplicar migraciones
python manage.py migrate

# Crear superusuario adicional
python manage.py createsuperuser

# Shell de Django
python manage.py shell

# Correr tests
python manage.py test

# Colectar archivos estÃ¡ticos
python manage.py collectstatic
```

### Docker Management
```bash
# Ver logs de servicios
docker-compose logs -f postgres
docker-compose logs -f redis

# Reiniciar servicios
docker-compose restart postgres redis

# Parar todos los servicios
docker-compose down

# Parar y eliminar volÃºmenes (âš ï¸ BORRA LA BASE DE DATOS)
docker-compose down -v

# Ver estado de contenedores
docker ps
```

### Desarrollo
```bash
# Ver logs de Django
cd backend && source venv/bin/activate
python manage.py runserver --verbosity=2

# Crear nueva app
python manage.py startapp nueva_app

# Crear superusuario
python manage.py createsuperuser
```

## ğŸ›¡ï¸ CaracterÃ­sticas de Seguridad
- JWT con rotaciÃ³n automÃ¡tica
- Passwords encriptados con bcrypt
- CORS configurado para localhost
- Rate limiting preparado
- Logs de auditorÃ­a configurados
- Variables de entorno para secrets

## ğŸ“Š API Endpoints Disponibles

### Authentication
- `POST /api/v1/auth/login/` - Login
- `POST /api/v1/auth/refresh/` - Refresh token
- `GET /api/v1/auth/profile/` - Perfil del usuario

### Health Checks
- `GET /api/v1/clients/health/` - Status del mÃ³dulo clientes
- `GET /api/v1/documents/health/` - Status del mÃ³dulo documentos
- `GET /api/v1/customs/health/` - Status del mÃ³dulo despachos
- `GET /api/v1/reports/health/` - Status del mÃ³dulo reportes

## ğŸ› Troubleshooting

### PostgreSQL no se conecta
```bash
# Verificar que el contenedor estÃ© corriendo
docker ps | grep postgres

# Ver logs de PostgreSQL
docker-compose logs postgres

# Conectar manualmente a la DB
docker exec -it bridge_lewis_postgres psql -U lewis_bridge -d bridge_lewis_db
```

### Redis no se conecta
```bash
# Verificar contenedor
docker ps | grep redis

# Conectar a Redis
docker exec -it bridge_lewis_redis redis-cli
AUTH Lewis_Redis_2024!
ping
```

### Django no inicia
```bash
# Verificar entorno virtual
cd backend
source venv/bin/activate
which python

# Reinstalar dependencias
pip install -r requirements.txt

# Verificar configuraciÃ³n
python manage.py check
```

### Puertos ocupados
```bash
# Verificar quÃ© procesos usan los puertos
sudo netstat -tlnp | grep :8000  # Django
sudo netstat -tlnp | grep :5432  # PostgreSQL  
sudo netstat -tlnp | grep :6379  # Redis

# Matar proceso en puerto especÃ­fico
sudo kill -9 $(sudo lsof -t -i:8000)
```

## ğŸ“± PrÃ³ximas Funcionalidades
- [ ] MÃ³dulo completo de Clientes
- [ ] Sistema de gestiÃ³n documental
- [ ] Workflow de despachos aduaneros
- [ ] IntegraciÃ³n con SIDUNEA
- [ ] Reportes ejecutivos y analytics
- [ ] Sistema de notificaciones
- [ ] App mÃ³vil (React Native)
- [ ] Integraciones bancarias

## ğŸ”„ Actualizaciones y Mantenimiento

### Backup de la base de datos
```bash
# Crear backup
docker exec bridge_lewis_postgres pg_dump -U lewis_bridge bridge_lewis_db > backup_$(date +%Y%m%d_%H%M%S).sql

# Restaurar backup
docker exec -i bridge_lewis_postgres psql -U lewis_bridge bridge_lewis_db < backup_file.sql
```

### Actualizar dependencias
```bash
cd backend && source venv/bin/activate
pip list --outdated
pip install --upgrade package_name
pip freeze > requirements.txt
```

---
**ğŸš€ Configurado especÃ­ficamente para Lewis - BRIDGE SaaS Bolivia ğŸ‡§ğŸ‡´**

*Para soporte tÃ©cnico o preguntas sobre el desarrollo, contacta al equipo de desarrollo.*
